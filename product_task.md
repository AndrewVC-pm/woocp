у меня есть сайт на wordpress, который выступает в роли лендинга, а также для обработки заказов с помощью плагина woocommerce. woocommerce показывает профиль пользователя, его подписку, обрабатывает платежи сделанный через cloudepayments и вызывает рекуррентные платежи с данными карты от первого заказа. данные о заказах хранятся в orders в wordpress, а данные о подписках хранятся в supabase.
также на события в woocommerce у меня стоят вебхуки из n8n - "@doc\data\n8n-webhook".md. в вебхуках я реализовал логику подписок - если купили подписку, то я пополнил баланс пользователя на сумму равную стоимости подписки и поставил подходящую группу по api в casdoor. через месяц мне приходит событие от woocommerce с обновление подписки, если оплата по предыдущим реквизитам не прошла, то я обнуляю баланс пользователя, если же оплатат прошла, то я снова пополняю баланс пользователя на нужную сумму и ставлю подходящую группу по api в casdoor. изучи сам как работает логика в "@doc\data\n8n-webhook", я мог забыть про что-то важное.
структура базs данных в supabase с примерами описана в "@doc\data\supabase".

также у меня подключен claudepayments не напрямую к woocommerce для проведения оплаты, а через собственные скрипты - 
1) snippets в wordpress - "@doc\data\n8n-webhook.md"
2) также на самом сайте с оплатой стоит этот скрипт - "@doc\data\site-script.md"

woocommerce стал часто плохо работать, я хочу полностью уйти от него, от n8n и написать свое решение, которое будет полностью повторять текущую логику, но и также будет выполнять функционал woocommerce. supabase как бд оставь.

само решение будет публиковать на сервере с доменом "pay.meurohub.pro", но я не хочу чтобы это занимало челый домен, давай сделаем такой путь "pay.neuro-hub.pro/pay/woocp/" и дальше можно использовать любые нужные пути

я могу что-то забыть. полностью изучи всю текущую логику и файлы, если я действительно забыл что-то важное, то перед тем как писать решение - попроси меня добавить недостоющую информацию.

